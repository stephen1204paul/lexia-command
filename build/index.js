(()=>{"use strict";var e={n:a=>{var n=a&&a.__esModule?()=>a.default:()=>a;return e.d(n,{a:n}),n},d:(a,n)=>{for(var t in n)e.o(n,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:n[t]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.wp.element,n=window.wp.i18n,t=window.wp.apiFetch;var o=e.n(t);const i=window.wp.components;function s(e,n){(0,a.useEffect)((()=>{const a=a=>{(/Mac|iPod|iPhone|iPad/.test(navigator.platform)?a.metaKey:a.ctrlKey)&&a.key.toLowerCase()===e.key.toLowerCase()&&n(a)};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}),[e,n])}const r="create",l="manage",c="content",d="plugins",m="settings",w="users",p=[{id:"create-page",type:r,category:c,title:(0,n.__)("Create a new page","lexia-command"),keywords:["new page","add page","create page"],icon:"ðŸ“„",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}post-new.php?post_type=page`}},{id:"create-post",type:r,category:c,title:(0,n.__)("Create a new post","lexia-command"),keywords:["new post","add post","create post","write"],icon:"âœï¸",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}post-new.php`}},{id:"media-library",type:l,category:c,title:(0,n.__)("Open Media Library","lexia-command"),keywords:["media","images","library","files"],icon:"ðŸ–¼ï¸",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}upload.php`}},{id:"plugins",type:l,category:d,title:(0,n.__)("Manage Plugins","lexia-command"),keywords:["plugins","add plugin","install plugin"],icon:"ðŸ”Œ",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}plugins.php`}},{id:"settings",type:l,category:m,title:(0,n.__)("Site Settings","lexia-command"),keywords:["settings","options","configure"],icon:"âš™ï¸",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}options-general.php`}},{id:"create-user",type:r,category:w,title:(0,n.__)("Create a new user","lexia-command"),keywords:["new user","add user","create user"],icon:"ðŸ‘¤",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}user-new.php`}},{id:"manage-users",type:l,category:w,title:(0,n.__)("Manage Users","lexia-command"),keywords:["users","all users","user list"],icon:"ðŸ‘¥",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}users.php`}},{id:"customize",type:l,category:m,title:(0,n.__)("Customize Theme","lexia-command"),keywords:["customize","theme","appearance"],icon:"ðŸŽ¨",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}customize.php`}},{id:"menus",type:l,category:c,title:(0,n.__)("Manage Menus","lexia-command"),keywords:["menus","navigation","nav"],icon:"ðŸ“‹",action:()=>{window.location.href=`${window.lexiaCommandData.adminUrl}nav-menus.php`}}],u=window.ReactJSXRuntime,y=function(){const[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)(""),[c,y]=(0,a.useState)([]),[g,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(0),_=(0,a.useCallback)((()=>{t(!0),f(0)}),[]),C=(0,a.useCallback)((()=>{t(!1),l(""),y([]),f(0)}),[]);return s({key:"k",metaKey:!0},(e=>{e.preventDefault(),_()})),s({key:"ArrowDown"},(a=>{e&&c.length>0&&(a.preventDefault(),f((e=>(e+1)%c.length)))})),s({key:"ArrowUp"},(a=>{e&&c.length>0&&(a.preventDefault(),f((e=>(e-1+c.length)%c.length)))})),s({key:"Enter"},(a=>{if(e&&c.length>0){a.preventDefault();const e=c[x];e.action&&(e.action(),C())}})),(0,a.useEffect)((()=>{if(!r)return y([]),void f(0);const e=setTimeout((async()=>{h(!0);try{const e=function(e){if(!e)return[];const a=e.toLowerCase();return p.filter((e=>!(e.category===d&&!window.lexiaCommandData.userCaps.manage_options)&&!(e.category===m&&!window.lexiaCommandData.userCaps.manage_options)&&!(e.category===w&&!window.lexiaCommandData.userCaps.manage_options)&&(e.title.toLowerCase().includes(a)||e.keywords.some((e=>e.toLowerCase().includes(a))))))}(r),a=new URLSearchParams({query:r}).toString(),n=await o()({path:`/${window.lexiaCommandData.restNamespace}/search?${a}`,method:"GET"});y([...e,...n.data.map((e=>({...e,icon:"ðŸ“",action:()=>{window.location.href=e.url}})))])}catch(e){console.error("Search failed:",e),y(commandResults||[])}finally{h(!1)}}),300);return()=>clearTimeout(e)}),[r]),e?(0,u.jsx)(i.Modal,{title:(0,n.__)("LexiaCommand","lexia-command"),onRequestClose:C,className:"lexia-command-modal",children:(0,u.jsxs)("div",{className:"lexia-command-container",children:[(0,u.jsx)(i.SearchControl,{value:r,onChange:l,placeholder:(0,n.__)("Type a command or search...","lexia-command"),className:"lexia-command-search",autoComplete:"off",autoFocus:!0}),(0,u.jsx)("div",{className:"lexia-command-results",children:g?(0,u.jsx)("div",{className:"lexia-command-loading",children:(0,n.__)("Searching...","lexia-command")}):c.length>0?(0,u.jsx)("ul",{children:c.map(((e,a)=>(0,u.jsxs)("li",{className:"lexia-command-result "+(a===x?"selected":""),onClick:()=>{e.action(),C()},onMouseEnter:()=>f(a),children:[(0,u.jsx)("span",{className:"lexia-command-result-icon",children:e.icon}),(0,u.jsx)("span",{className:"lexia-command-result-title",children:e.title})]},e.id||a)))}):r?(0,u.jsx)("div",{className:"lexia-command-no-results",children:(0,n.__)("No results found","lexia-command")}):(0,u.jsx)("div",{className:"lexia-command-empty-state",children:(0,n.__)("Start typing to search...","lexia-command")})})]})}):null};(0,a.render)((0,u.jsx)(y,{}),document.getElementById("lexia-command-root"))})();